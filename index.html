<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>「走告」利益シミュレーター（経費入力版）</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
        }
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        /* --- ここからアニメーション用のCSSを追加 --- */

        /* 全ての要素に滑らかな変化を適用 */
        * {
            transition: all 0.2s ease-in-out;
        }
        
        /* メインコンテナのフェードイン */
        .main-container {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 入力欄のフォーカスアニメーション */
        input[type=number]:focus, input[type=checkbox]:focus {
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            border-color: #6366f1; /* indigo-500 */
        }

        /* 結果表示ボックスのホバーエフェクト */
        .result-box {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .result-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-6xl main-container">
        <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8">

            <!-- ヘッダー -->
            <div class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">走告</h1>
                <p class="text-gray-500 mt-2">利益シミュレーター（経費入力版）</p>
            </div>

            <!-- 契約内容入力セクション -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">契約内容</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="numVehicles" class="block text-sm font-medium text-gray-700 mb-1">契約台数</label>
                        <div class="relative">
                            <input type="number" id="numVehicles" min="1" value="1" class="w-full p-2 pr-10 border border-gray-300 rounded-md">
                            <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">台</span>
                        </div>
                    </div>
                    <div>
                        <label for="numMonths" class="block text-sm font-medium text-gray-700 mb-1">契約月数</label>
                        <div class="relative">
                            <input type="number" id="numMonths" min="1" value="1" class="w-full p-2 pr-12 border border-gray-300 rounded-md">
                            <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">ヶ月</span>
                        </div>
                    </div>
                    <div class="flex items-end pb-1">
                        <div class="flex items-center">
                             <input id="option" name="option" type="checkbox" class="h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                             <label for="option" class="ml-2 text-sm font-medium text-gray-800">WEBアナリティクスオプション</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 経費入力セクション -->
            <div class="space-y-6">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2">経費入力</h2>

                <!-- 初期費用経費 -->
                <div>
                    <h3 class="text-lg font-medium text-gray-600 mb-3">初期費用経費</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label for="costDesign" class="block text-sm font-medium text-gray-700 mb-1">デザイン制作費</label>
                            <div class="relative">
                                <input type="number" id="costDesign" value="40000" class="w-full p-2 pr-10 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円</span>
                            </div>
                        </div>
                        <div>
                            <label for="costReview" class="block text-sm font-medium text-gray-700 mb-1">デザイン審査申請費</label>
                            <div class="relative">
                                <input type="number" id="costReview" value="10000" class="w-full p-2 pr-10 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円</span>
                            </div>
                        </div>
                         <div>
                            <label for="costColor" class="block text-sm font-medium text-gray-700 mb-1">色校正費</label>
                            <div class="relative">
                                <input type="number" id="costColor" value="15000" class="w-full p-2 pr-10 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円</span>
                            </div>
                        </div>
                        <div>
                            <label for="costSheet" class="block text-sm font-medium text-gray-700 mb-1">シート制作費</label>
                            <div class="relative">
                                <input type="number" id="costSheet" value="13000" class="w-full p-2 pr-12 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円/台</span>
                            </div>
                        </div>
                        <div>
                            <label for="costConstruction" class="block text-sm font-medium text-gray-700 mb-1">施工費</label>
                            <div class="relative">
                                <input type="number" id="costConstruction" value="40000" class="w-full p-2 pr-12 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円/台</span>
                            </div>
                        </div>
                        <div>
                            <label for="costPermit" class="block text-sm font-medium text-gray-700 mb-1">屋外広告物許可申請費</label>
                            <div class="relative">
                                <input type="number" id="costPermit" value="2000" class="w-full p-2 pr-12 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円/台</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 月額費用経費 -->
                <div>
                    <h3 class="text-lg font-medium text-gray-600 mb-3">月額費用経費</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label for="costDriver" class="block text-sm font-medium text-gray-700 mb-1">ドライバー報酬</label>
                            <div class="relative">
                                <input type="number" id="costDriver" value="20000" class="w-full p-2 pr-20 border border-gray-300 rounded-md">
                                <span class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm text-gray-500">円/月/台</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 区切り線 -->
            <hr class="my-8 border-gray-200">

            <!-- 結果表示セクション -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- 売上セクション -->
                <div class="space-y-3 bg-blue-50 p-4 rounded-lg result-box">
                    <h2 class="text-lg font-semibold text-blue-800 text-center">売上</h2>
                    <div class="flex justify-between items-center"><span>初期費用</span><span id="revenueInitial" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center"><span>月額利用料</span><span id="revenueMonthly" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center font-bold text-blue-800 border-t pt-2 mt-2"><span>総売上</span><span id="revenueTotal" class="text-xl">0円</span></div>
                </div>

                <!-- 経費セクション -->
                <div class="space-y-3 bg-red-50 p-4 rounded-lg result-box">
                    <h2 class="text-lg font-semibold text-red-800 text-center">経費</h2>
                    <div class="flex justify-between items-center"><span>初期費用</span><span id="costInitialTotal" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center"><span>月額費用</span><span id="costMonthlyTotal" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center font-bold text-red-800 border-t pt-2 mt-2"><span>総経費</span><span id="costTotal" class="text-xl">0円</span></div>
                </div>

                <!-- 利益セクション -->
                <div class="space-y-3 bg-green-50 p-4 rounded-lg result-box">
                    <h2 class="text-lg font-semibold text-green-800 text-center">利益</h2>
                    <div class="flex justify-between items-center"><span>初期費用</span><span id="profitInitial" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center"><span>月額費用</span><span id="profitMonthly" class="font-medium">0円</span></div>
                    <div class="flex justify-between items-center font-bold text-green-800 border-t pt-2 mt-2"><span>総利益</span><span id="profitTotal" class="text-xl">0円</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // すべての入力要素を取得
        const inputs = [
            'numVehicles', 'numMonths', 'option', 'costDesign', 'costReview', 
            'costSheet', 'costColor', 'costConstruction', 'costPermit', 'costDriver'
        ];
        const inputElements = {};
        inputs.forEach(id => inputElements[id] = document.getElementById(id));

        // すべての出力要素を取得
        const outputs = [
            'revenueInitial', 'revenueMonthly', 'revenueTotal',
            'costInitialTotal', 'costMonthlyTotal', 'costTotal',
            'profitInitial', 'profitMonthly', 'profitTotal'
        ];
        const outputElements = {};
        outputs.forEach(id => outputElements[id] = document.getElementById(id));

        function calculate() {
            // 1. 入力値の取得
            const numVehicles = parseInt(inputElements.numVehicles.value) || 0;
            const numMonths = parseInt(inputElements.numMonths.value) || 0;
            const hasOption = inputElements.option.checked;

            const costDesign = parseInt(inputElements.costDesign.value) || 0;
            const costReview = parseInt(inputElements.costReview.value) || 0;
            const costSheet = parseInt(inputElements.costSheet.value) || 0;
            const costColor = parseInt(inputElements.costColor.value) || 0;
            const costConstruction = parseInt(inputElements.costConstruction.value) || 0;
            const costPermit = parseInt(inputElements.costPermit.value) || 0;
            const costDriver = parseInt(inputElements.costDriver.value) || 0;
            
            if (numVehicles <= 0 || numMonths <= 0) {
                outputs.forEach(id => outputElements[id].textContent = '0円');
                return;
            }

            // 2. 売上の計算
            const revenueInitial = (82000 * numVehicles) + 50000;
            let revenueMonthlyAd = 0;
            if (numVehicles <= 4) {
                revenueMonthlyAd = numVehicles * 50000;
            } else {
                revenueMonthlyAd = (4 * 50000) + ((numVehicles - 4) * 40000);
            }
            const optionFee = hasOption ? 5000 : 0;
            const revenueMonthly = revenueMonthlyAd + optionFee;
            const revenueTotal = revenueInitial + (revenueMonthly * numMonths);

            // 3. 経費の計算
            const costInitialTotal = costDesign + costReview + costColor + (costSheet * numVehicles) + (costConstruction * numVehicles) + (costPermit * numVehicles);
            const costMonthlyTotal = costDriver * numVehicles;
            const costTotal = costInitialTotal + (costMonthlyTotal * numMonths);

            // 4. 利益の計算
            const profitInitial = revenueInitial - costInitialTotal;
            const profitMonthly = revenueMonthly - costMonthlyTotal;
            const profitTotal = revenueTotal - costTotal;

            // 5. 結果の表示
            const formatter = new Intl.NumberFormat('ja-JP');
            const formatCurrency = (value) => `${formatter.format(value)}円`;

            outputElements.revenueInitial.textContent = formatCurrency(revenueInitial);
            outputElements.revenueMonthly.textContent = formatCurrency(revenueMonthly);
            outputElements.revenueTotal.textContent = formatCurrency(revenueTotal);

            outputElements.costInitialTotal.textContent = formatCurrency(costInitialTotal);
            outputElements.costMonthlyTotal.textContent = formatCurrency(costMonthlyTotal);
            outputElements.costTotal.textContent = formatCurrency(costTotal);

            outputElements.profitInitial.textContent = formatCurrency(profitInitial);
            outputElements.profitMonthly.textContent = formatCurrency(profitMonthly);
            outputElements.profitTotal.textContent = formatCurrency(profitTotal);
        }

        // すべての入力にイベントリスナーを設定
        inputs.forEach(id => {
            const el = inputElements[id];
            const eventType = el.type === 'checkbox' ? 'change' : 'input';
            el.addEventListener(eventType, calculate);
        });

        // 初期表示
        window.onload = calculate;
    </script>
</body>
</html>
